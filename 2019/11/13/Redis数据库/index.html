<!DOCTYPE html>





<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.4.1">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.4.1">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.4.1">
  <link rel="mask-icon" href="/images/logo.svg?v=7.4.1" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.4.1">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.4.1',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="Redis简介Redis是一个开源的key-value存储系统。和Memcached类似，它支持存储的value类型相对更多，">
<meta name="keywords" content="Redis">
<meta property="og:type" content="article">
<meta property="og:title" content="Redis数据库">
<meta property="og:url" content="http://yoursite.com/2019/11/13/Redis数据库/index.html">
<meta property="og:site_name" content="一只鱼的博客">
<meta property="og:description" content="Redis简介Redis是一个开源的key-value存储系统。和Memcached类似，它支持存储的value类型相对更多，">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://yoursite.com/2019/11/13/Redis数据库/11.png">
<meta property="og:image" content="http://yoursite.com/2019/11/13/Redis数据库/1.png">
<meta property="og:image" content="http://yoursite.com/2019/11/13/Redis数据库/2.png">
<meta property="og:image" content="http://yoursite.com/2019/11/13/Redis数据库/3.png">
<meta property="og:image" content="http://yoursite.com/2019/11/13/Redis数据库/4.png">
<meta property="og:image" content="http://yoursite.com/2019/11/13/Redis数据库/5.png">
<meta property="og:image" content="http://yoursite.com/2019/11/13/Redis数据库/6.png">
<meta property="og:image" content="http://yoursite.com/2019/11/13/Redis数据库/7.png">
<meta property="og:image" content="http://yoursite.com/2019/11/13/Redis数据库/8.png">
<meta property="og:image" content="http://yoursite.com/2019/11/13/Redis数据库/9.png">
<meta property="og:image" content="http://yoursite.com/2019/11/13/Redis数据库/10.png">
<meta property="og:image" content="http://yoursite.com/2019/11/13/Redis数据库/12.png">
<meta property="og:image" content="http://yoursite.com/2019/11/13/Redis数据库/13.png">
<meta property="og:image" content="http://yoursite.com/2019/11/13/Redis数据库/14.png">
<meta property="og:image" content="http://yoursite.com/2019/11/13/Redis数据库/15.png">
<meta property="og:image" content="http://yoursite.com/2019/11/13/Redis数据库/16.png">
<meta property="og:image" content="http://yoursite.com/2019/11/13/Redis数据库/17.png">
<meta property="og:image" content="http://yoursite.com/2019/11/13/Redis数据库/18.png">
<meta property="og:image" content="http://yoursite.com/2019/11/13/Redis数据库/19.png">
<meta property="og:image" content="http://yoursite.com/2019/11/13/Redis数据库/20.png">
<meta property="og:image" content="http://yoursite.com/2019/11/13/Redis数据库/21.png">
<meta property="og:image" content="http://yoursite.com/2019/11/13/Redis数据库/22.png">
<meta property="og:image" content="http://yoursite.com/2019/11/13/Redis数据库/23.png">
<meta property="og:updated_time" content="2019-11-14T01:32:07.530Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Redis数据库">
<meta name="twitter:description" content="Redis简介Redis是一个开源的key-value存储系统。和Memcached类似，它支持存储的value类型相对更多，">
<meta name="twitter:image" content="http://yoursite.com/2019/11/13/Redis数据库/11.png">
  <link rel="canonical" href="http://yoursite.com/2019/11/13/Redis数据库/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Redis数据库 | 一只鱼的博客</title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">
  <div class="container use-motion">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">一只鱼的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">七秒钟的记忆多一秒</p>
      
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    
      
      
        
      
        
      
        
      
    

    <a href="/" rel="section"><i class="fa fa-fw fa-question-circle"></i>首页</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-about">
      
    
      
      
        
      
        
      
        
      
    

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-tags">
      
    
      
      
        
      
        
      
        
          
        
      
    

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-question-circle"></i>标签<span class="badge">41</span></a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-categories">
      
    
      
      
        
      
        
          
        
      
        
      
    

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-question-circle"></i>分类<span class="badge">10</span></a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    
      
      
        
          
        
      
        
      
        
      
    

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-question-circle"></i>归档<span class="badge">49</span></a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-schedule">
      
    
      
      
        
      
        
      
        
      
    

    <a href="/schedule/" rel="section"><i class="fa fa-fw fa-calendar"></i>日程表</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-sitemap">
      
    
      
      
        
      
        
      
        
      
    

    <a href="/sitemap.xml" rel="section"><i class="fa fa-fw fa-sitemap"></i>站点地图</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-commonweal">
      
    
      
      
        
      
        
      
        
      
    

    <a href="/404/" rel="section"><i class="fa fa-fw fa-heartbeat"></i>公益 404</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
      <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block post">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/13/Redis数据库/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="小鱼儿">
      <meta itemprop="description" content="肩膀有点痒，可能在长小翅膀">
      <meta itemprop="image" content="/images/fish.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一只鱼的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">Redis数据库

          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-11-13 09:37:40" itemprop="dateCreated datePublished" datetime="2019-11-13T09:37:40+08:00">2019-11-13</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-11-14 09:32:07" itemprop="dateModified" datetime="2019-11-14T09:32:07+08:00">2019-11-14</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Redis/" itemprop="url" rel="index"><span itemprop="name">Redis</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Redis简介"><a href="#Redis简介" class="headerlink" title="Redis简介"></a>Redis简介</h1><p>Redis是一个开源的key-value存储系统。和Memcached类似，它支持存储的value类型相对更多，<a id="more"></a>包括string(字符串)、list(链表)、set(集合)、zset(sorted set –有序集合)和hash（哈希类型）。这些数据类型都支持push/pop、add/remove及取交集并集和差集及更丰富的操作，而且这些操作都是原子性的。在此基础上，Redis支持各种不同方式的排序。与memcached一样，为了保证效率，数据都是缓存在内存中。区别的是Redis会周期性的把更新的数据写入磁盘或者把修改操作写入追加的记录文件，并且在此基础上实现了master-slave(主从)同步。</p>
<h2 id="技术"><a href="#技术" class="headerlink" title="技术"></a>技术</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">单线程+多路IO复用技术</span><br></pre></td></tr></table></figure>

<p>多路复用是指使用一个线程来检查多个文件描述符（Socket）的就绪状态，比如调用select和poll函数，传入多个文件描述符，如果有一个文件描述符就绪，则返回，否则阻塞直到超时。得到就绪状态后进行真正的操作可以在同一个线程里执行，也可以启动线程执行（比如使用线程池）。</p>
<h2 id="memcached-vs-Redis"><a href="#memcached-vs-Redis" class="headerlink" title="memcached vs Redis"></a>memcached vs Redis</h2><p><img src="/2019/11/13/Redis数据库/11.png" alt="1573647867752"></p>
<h1 id="Redis启动"><a href="#Redis启动" class="headerlink" title="Redis启动"></a>Redis启动</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">redis-server myredis/redis.conf</span><br><span class="line">redis-cli</span><br></pre></td></tr></table></figure>

<h1 id="Redis数据类型"><a href="#Redis数据类型" class="headerlink" title="Redis数据类型"></a>Redis数据类型</h1><p><img src="/2019/11/13/Redis数据库/1.png" alt="1573611349918"></p>
<h2 id="key"><a href="#key" class="headerlink" title="key"></a>key</h2><ul>
<li>keys *  查询当前库的所有键</li>
<li>exists <key>  判断某个键是否存在</key></li>
<li>type <key>  查看键的类型</key></li>
<li>del <key>  删除某个键</key></li>
<li>expire <key> <seconds>  为键值设置过期时间，单位为秒</seconds></key></li>
<li>ttl <key>  查看还有多少秒过期，-1表示永不过期，-2表示已过期</key></li>
<li>dbsize  查看当前数据库的key数量</li>
<li>flushdb 清空当前库</li>
<li>flushall  通杀全部库</li>
</ul>
<p><img src="/2019/11/13/Redis数据库/2.png" alt="1573611894669"></p>
<h2 id="String类型"><a href="#String类型" class="headerlink" title="String类型"></a>String类型</h2><h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ol>
<li><p>String是Redis最基本的类型，你可以理解成与Memcached一模一样的类型，一个key对应一个value</p>
</li>
<li><p>String类型是二进制安全的。意味着Redis的string可以包含任何数据。比如jpg图片或者序列化的对象 </p>
</li>
<li><p>String类型是Redis最基本的数据类型，一个Redis中字符串value最多可以是512M</p>
</li>
</ol>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><ul>
<li><p>get <key>  查询对应的键值</key></p>
</li>
<li><p>set <key> <value> 添加键值对</value></key></p>
</li>
<li><p>append <key> <value>  将给定的<value>追加到原值末尾</value></value></key></p>
</li>
<li><p>strlen <key>  获得值的长度</key></p>
</li>
<li><p>setnx <key> <value>  只有在key不存在时设置key值</value></key></p>
</li>
<li><p>incr <key>   将key中存储的数字增1，只能对数字值操作，如果为空，新增值为1</key></p>
</li>
<li><p>decr <key>  将key中存储的数字减1，只能对数字值操作，如果为空，新增值为-1</key></p>
</li>
<li><p>incrby/decrby <key> &lt;步长&gt;  将key中存储的数字值增减，自定义步长</key></p>
</li>
<li><p>mset <key1> <value1> <key2> <value2> ……  同时设置一个或多个key-value对</value2></key2></value1></key1></p>
</li>
<li><p>mget <key1><key2><key3>……  同时获取一个或多个value</key3></key2></key1></p>
</li>
<li><p>msetnx <key1> <value1> <key2> <value2> ……  同时设置一个或多个key-value对，当且仅当所有给定的key都不存在</value2></key2></value1></key1></p>
</li>
<li><p>getrange <key> &lt;起始位置&gt; &lt;结束位置&gt;  获得值的范围，类似于substring</key></p>
</li>
<li><p>setrange <key> &lt;起始位置&gt; <value>   用<value>  覆写<key>所储存的字符串值，从&lt;起始位置&gt;开始</key></value></value></key></p>
</li>
<li><p>setex <key> &lt;过期时间&gt; <value>  设置键值的同时，设置过期时间，单位为秒</value></key></p>
</li>
<li><p>getset <key> <value>  以新换旧，设置新值同时获得旧值</value></key></p>
<h2 id="List类型"><a href="#List类型" class="headerlink" title="List类型"></a>List类型</h2></li>
</ul>
<h3 id="特点-1"><a href="#特点-1" class="headerlink" title="特点"></a>特点</h3><ol>
<li><p>单键多值</p>
</li>
<li><p>Redis 列表是简单的<strong>字符串列表</strong>，按照插入顺序排序。你可以添加一个元素到列表的头部（左边）或者尾部（右边）。</p>
</li>
<li><p>它的底层实际是个<strong>双向链表，对两端的操作性能很高，通过索引下标的操作中间的节点性能会较差。</strong></p>
</li>
</ol>
<p><img src="/2019/11/13/Redis数据库/3.png" alt="1573614477369"></p>
<h3 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h3><ul>
<li>lpush/rpush <key> <value1> <value2> <value3>……从左边/右边插入一个或多个值</value3></value2></value1></key></li>
<li>lpop/rpop <key> 从左边/右边吐出一个值，值在键在，值亡键亡</key></li>
<li>rpoplpush <key1> <key2> 从<key1>右边吐出一个值，插到<key2>左边</key2></key1></key2></key1></li>
<li>lrange <key> <start> <stop></stop>  按照索引下标获得元素，从左到右</start></key></li>
<li>lindex <key> <index>  按照索引下标获得元素，从左到右</index></key></li>
<li>llen <key>  获得列表长度</key></li>
<li>linsert <key> before <value> <newvalue>  在<value>的前面插入<newvalue></newvalue></value></newvalue></value></key></li>
<li>lrem <key> <n> <value>  从左边删除n个value</value></n></key></li>
</ul>
<h2 id="Set类型"><a href="#Set类型" class="headerlink" title="Set类型"></a>Set类型</h2><h3 id="特点-2"><a href="#特点-2" class="headerlink" title="特点"></a>特点</h3><ol>
<li>Redis set对外提供的功能与list类似是一个列表的功能，特殊之处在于set是可以<strong>自动排重</strong>的，当你需要存储一个列表数据，又不希望出现重复数据时，set是一个很好的选择，并且set提供了判断某个成员是否在一个set集合内的重要接口，这个也是list所不能提供的。</li>
<li>Redis的Set是string类型的<strong>无序集合</strong>。它底层其实是一个<strong>value为null的hash表</strong>,所以添加，删除，查找的复杂度都是O(1)</li>
</ol>
<h3 id="语法-2"><a href="#语法-2" class="headerlink" title="语法"></a>语法</h3><ul>
<li>sadd <key> <value1> <value2>…… 将一个或多个member元素加入到key集合中，已经存在于集合中的member元素将被忽略</value2></value1></key></li>
<li>smember <key>  取出该集合的所有值</key></li>
<li>sismember <key> <value> 判断集合<key>中是否含有<value>值，有返回1，没有返回0</value></key></value></key></li>
<li>scard <key>  返回集合中元素个数</key></li>
<li>srem <key> <value1> <value2>…… 删除集合中某个元素</value2></value1></key></li>
<li>spop <key> 随机从集合中吐出一个值</key></li>
<li>srandmember <key> <n> 随机从集合中取出n个值，不会从集合中删除</n></key></li>
<li>sinter <key1> <key2>  返回两个集合的交集元素</key2></key1></li>
<li>sunion <key1> <key2>  返回两个集合的并集元素</key2></key1></li>
<li>sdiff <key1><key2> 返回两个集合的差集元素</key2></key1></li>
</ul>
<h2 id="Hash类型"><a href="#Hash类型" class="headerlink" title="Hash类型"></a>Hash类型</h2><h3 id="特点-3"><a href="#特点-3" class="headerlink" title="特点"></a>特点</h3><ol>
<li><p>Redis  hash 是一个键值对集合。</p>
</li>
<li><p>Redis hash是一个string类型的field和value的映射表，hash特别适合用于存储对象。</p>
</li>
<li><p>类似Java里面的Map&lt;String,Object&gt;</p>
</li>
</ol>
<p><img src="/2019/11/13/Redis数据库/4.png" alt="1573621778615"></p>
<h3 id="语法-3"><a href="#语法-3" class="headerlink" title="语法"></a>语法</h3><ul>
<li>hset <key> <field> <value> 给<key>集合中的<field>键赋值<value></value></field></key></value></field></key></li>
<li>hget <key1> <field>  从<key1>集合<field>取出value</field></key1></field></key1></li>
<li>hmset <key1> <field1> <value1>  <field2> <value2>…… 批量设置hash值</value2></field2></value1></field1></key1></li>
<li>hexists key <field>  查看key中，给定域field是否存在</field></li>
<li>hkeys <key>  列出hash集合中所有的field</key></li>
<li>hvals <key>  列出hash集合中所有value</key></li>
<li>hincrby <key> <field> <increment>  为key中field的值加上增量</increment></field></key></li>
<li>hsetnx <key> <field> <value> 将key中field的值设置为value，当且仅当field不存在</value></field></key></li>
</ul>
<h2 id="Zset类型"><a href="#Zset类型" class="headerlink" title="Zset类型"></a>Zset类型</h2><h3 id="特点-4"><a href="#特点-4" class="headerlink" title="特点"></a>特点</h3><p>Redis有序集合zset与普通集合set非常相似，是一个没有重复元素的字符串集合。不同之处是有序集合的所有成员都关联了一个评分（score），这个评分（score）被用来按照从最低分到最高分的方式排序集合中的成员。集合的成员是唯一的，但是评分可以是重复了 。</p>
<p>因为元素是有序的, 所以你也可以很快的根据评分（score）或者次序（position）来获取一个范围的元素。访问有序集合的中间元素也是非常快的,因此你能够使用有序集合作为一个没有重复成员的智能列表。</p>
<h3 id="语法-4"><a href="#语法-4" class="headerlink" title="语法"></a>语法</h3><ul>
<li>zadd <key> <score1> <value1> <score1> <value2> …… 将一个或多个member元素及其score值加入有序集合key中</value2></score1></value1></score1></key></li>
<li>zrange <key> <start> <stop></stop>[withscores] 返回有序集合key中，下标在<start><stop></stop>之间的元素</start></start></key></li>
<li>zrangebyscore <key> <min> <max> [withscores] 返回有序集key中所有score值介于min和max之间（包含）的成员，有序级成员按score值递增排列</max></min></key></li>
<li>zrevrangebyscore <key> <max> <min> [withscores] 同上，改为从大到小</min></max></key></li>
<li>zincrby <key> <increment> <value> 为元素的score加上增量</value></increment></key></li>
<li>zrem <key> <value> 删除集合下指定值的元素</value></key></li>
<li>zcount<key> <min> <max> 统计集合分数区间内的元素个数</max></min></key></li>
<li>zrank <key> <value> 返回该值在集合中的排名，从0开始</value></key></li>
</ul>
<h1 id="Java的Redis客户端Jedis"><a href="#Java的Redis客户端Jedis" class="headerlink" title="Java的Redis客户端Jedis"></a>Java的Redis客户端Jedis</h1><ul>
<li>Jedis所需要的jar包</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. Commons-pool-1.6.jar</span><br><span class="line">2. Jedis-2.1.0.jar</span><br></pre></td></tr></table></figure>

<ul>
<li>eclipse连接虚拟机的redis注意事项</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1. 禁用Linux的防火墙：</span><br><span class="line">2. 临时禁用：**service iptables stop**</span><br><span class="line">3. 关闭开机自启：**chkconfig** **iptables off**</span><br><span class="line">4. redis.conf中**注释掉**bind 127.0.0.1（61行） ,然后 protect-mode（80行）设置为 **no**。</span><br></pre></td></tr></table></figure>

<h2 id="测试连通性"><a href="#测试连通性" class="headerlink" title="测试连通性"></a>测试连通性</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//连接本地Redis</span></span><br><span class="line">Jedis jedis = <span class="keyword">new</span> Jedis(<span class="string">"192.168.1.105"</span>,<span class="number">6379</span>);</span><br><span class="line"><span class="comment">//查看服务器是否运行</span></span><br><span class="line">System.out.println(jedis.ping());</span><br></pre></td></tr></table></figure>

<h2 id="Jedis-API"><a href="#Jedis-API" class="headerlink" title="Jedis-API"></a>Jedis-API</h2><h3 id="Key"><a href="#Key" class="headerlink" title="Key"></a>Key</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Set&lt;String&gt; keys = jedis.keys(<span class="string">"*"</span>);</span><br><span class="line"><span class="keyword">for</span> (String key : keys) &#123;</span><br><span class="line">	System.out.println(key);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="String"><a href="#String" class="headerlink" title="String"></a>String</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(jedis.get(<span class="string">"a"</span>));</span><br><span class="line"></span><br><span class="line">jedis.set(<span class="string">"k8"</span>, <span class="string">"v1"</span>);</span><br><span class="line">System.out.println(jedis.get(<span class="string">"k8"</span>));</span><br><span class="line">		jedis.mset(<span class="string">"str1"</span>,<span class="string">"v1"</span>,<span class="string">"str2"</span>,<span class="string">"v2"</span>,<span class="string">"str3"</span>,<span class="string">"v3"</span>)	System.out.println(jedis.mget(<span class="string">"str1"</span>,<span class="string">"str2"</span>,<span class="string">"str3"</span>));</span><br></pre></td></tr></table></figure>

<h3 id="List"><a href="#List" class="headerlink" title="List"></a>List</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = jedis.lrange(<span class="string">"k1"</span>, <span class="number">0</span>, <span class="number">9</span>);</span><br><span class="line"><span class="keyword">for</span> (String element : list) &#123;</span><br><span class="line">	System.out.println(element);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">jedis.sadd(<span class="string">"orders"</span>, <span class="string">"jd001"</span>);</span><br><span class="line">jedis.sadd(<span class="string">"orders"</span>, <span class="string">"jd002"</span>);</span><br><span class="line">jedis.sadd(<span class="string">"orders"</span>, <span class="string">"jd003"</span>);</span><br><span class="line">		</span><br><span class="line">Set&lt;String&gt; set = jedis.smembers(<span class="string">"orders"</span>);</span><br><span class="line"><span class="keyword">for</span> (String element : set) &#123;</span><br><span class="line">		System.out.println(element);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Hash"><a href="#Hash" class="headerlink" title="Hash"></a>Hash</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String,String&gt; map = <span class="keyword">new</span> HashMap&lt;String,String&gt;();</span><br><span class="line">map.put(<span class="string">"name"</span>, <span class="string">"zhangsan"</span>);</span><br><span class="line">map.put(<span class="string">"email"</span>, <span class="string">"123@qq.com"</span>);</span><br><span class="line">jedis.hmset(<span class="string">"student"</span>, map);</span><br><span class="line">List&lt;String&gt; list = jedis.hmget(<span class="string">"student"</span>, <span class="string">"name"</span>,<span class="string">"email"</span>);</span><br><span class="line"><span class="keyword">for</span> (String element : list) &#123;</span><br><span class="line">		System.out.println(element);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Zset"><a href="#Zset" class="headerlink" title="Zset"></a>Zset</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">jedis.zadd(<span class="string">"zset01"</span>, <span class="number">23</span>d, <span class="string">"v1"</span>);</span><br><span class="line">jedis.zadd(<span class="string">"zset01"</span>, <span class="number">12</span>d, <span class="string">"v2"</span>);</span><br><span class="line">jedis.zadd(<span class="string">"zset01"</span>, <span class="number">56</span>d, <span class="string">"v3"</span>);</span><br><span class="line">jedis.zadd(<span class="string">"zset01"</span>, <span class="number">98</span>d, <span class="string">"v4"</span>);</span><br><span class="line">jedis.zadd(<span class="string">"zset01"</span>, <span class="number">68</span>d, <span class="string">"v5"</span>);</span><br><span class="line">Set&lt;String&gt; sets = jedis.zrangeByScore(<span class="string">"zset01"</span>, <span class="number">30</span>, <span class="number">100</span>);</span><br><span class="line"><span class="keyword">for</span> (String set : sets) &#123;</span><br><span class="line">	System.out.println(set);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Redis事务"><a href="#Redis事务" class="headerlink" title="Redis事务"></a>Redis事务</h1><h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p>Redis事务是一个单独的隔离操作：事务中的所有命令都会序列化、按顺序地执行。事务在执行的过程中，不会被其他客户端发送来的命令请求所打断。</p>
<h2 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h2><p>Redis事务的主要作用就是串联多个命令防止别的命令插队</p>
<h2 id="Multi、Exec、discard"><a href="#Multi、Exec、discard" class="headerlink" title="Multi、Exec、discard"></a>Multi、Exec、discard</h2><ul>
<li>从输入Multi命令开始，输入的命令都会依次进入命令队列中，但不会执行，至到输入Exec后，Redis会将之前的命令队列中的命令依次执行。</li>
<li>组队的过程中可以通过discard来放弃组队</li>
</ul>
<p><img src="/2019/11/13/Redis数据库/5.png" alt="1573645294162"></p>
<h2 id="事务错误处理"><a href="#事务错误处理" class="headerlink" title="事务错误处理"></a>事务错误处理</h2><ul>
<li>组队中某个命令出现了报告错误，执行时整个的所有队列会都会被取消</li>
<li>如果执行阶段某个命令报出了错误，则只有报错的命令不会被执行，而其他的命令都会执行，不会回滚</li>
</ul>
<p><img src="/2019/11/13/Redis数据库/6.png" alt="1573645376301"></p>
<h2 id="事务冲突"><a href="#事务冲突" class="headerlink" title="事务冲突"></a>事务冲突</h2><p><img src="/2019/11/13/Redis数据库/7.png" alt="1573645419686"></p>
<h2 id="冲突解决"><a href="#冲突解决" class="headerlink" title="冲突解决"></a>冲突解决</h2><h3 id="悲观锁"><a href="#悲观锁" class="headerlink" title="悲观锁"></a>悲观锁</h3><p><img src="/2019/11/13/Redis数据库/8.png" alt="1573645684396"></p>
<p>悲观锁(Pessimistic Lock), 顾名思义，就是很悲观，每次去拿数据的时候都认为别人会修改，所以每次在拿数据的时候都会上锁，这样别人想拿这个数据就会block直到它拿到锁。<strong>传统的关系型数据库里边就用到了很多这种锁机制</strong>，比如行锁，表锁等，读锁，写锁等，都是在做操作之前先上锁。</p>
<h3 id="乐观锁"><a href="#乐观锁" class="headerlink" title="乐观锁"></a>乐观锁</h3><p><img src="/2019/11/13/Redis数据库/9.png" alt="1573645743505"></p>
<p>乐观锁(Optimistic Lock), 顾名思义，就是很乐观，每次去拿数据的时候都认为别人不会修改，所以不会上锁，但是在更新的时候会判断一下在此期间别人有没有去更新这个数据，可以使用版本号等机制。<strong>乐观锁适用于多读的应用类型，这样可以提高吞吐量</strong>。Redis就是利用这种check-and-set机制实现事务的。</p>
<p><img src="/2019/11/13/Redis数据库/10.png" alt="1573647196062"></p>
<h2 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h2><ul>
<li><p>单独的隔离操作 </p>
<p>事务中的所有命令都会序列化、按顺序地执行。事务在执行的过程中，不会被其他客户端发送来的命令请求所打断</p>
</li>
<li><p>没有隔离级别的概念 </p>
<p>队列中的命令没有提交之前都不会实际的被执行，因为事务提交前任何指令都不会被实际执行，也就不存在“事务内的查询要看到事务里的更新，在事务外查询不能看到”这个让人万分头痛的问题 </p>
</li>
<li><p>不保证原子性 </p>
<p>Redis同一个事务中如果有一条命令执行失败，其后的命令仍然会被执行，没有回滚</p>
</li>
</ul>
<h1 id="Redis-持久化"><a href="#Redis-持久化" class="headerlink" title="Redis 持久化"></a>Redis 持久化</h1><h2 id="RDB方式"><a href="#RDB方式" class="headerlink" title="RDB方式"></a>RDB方式</h2><p>Redis DataBase，在指定的时间间隔内将内存中的数据集快照写入磁盘，也就是行话讲的Snapshot快照，它恢复时是将快照文件直接读到内存里。</p>
<ul>
<li>备份如何执行</li>
</ul>
<p>Redis会单独创建（fork）一个子进程来进行持久化，会先将数据写入到一个临时文件中，待持久化过程都结束了，再用这个临时文件替换上次持久化好的文件。整个过程中，主进程是不进行任何IO操作的，这就确保了极高的性能如果需要进行大规模数据的恢复，且对于数据恢复的完整性不是非常敏感，那RDB方式要比AOF方式更加的高效。RDB的缺点是最后一次持久化后的数据可能丢失。</p>
<ul>
<li>关于fork</li>
</ul>
<p>在Linux程序中，fork()会产生一个和父进程完全相同的子进程，但子进程在此后多会exec系统调用，出于效率考虑，Linux中引入了“写时复制技术”，<strong>一般情况父进程和子进程会共用同一段物理内存</strong>，只有进程空间的各段的内容要发生变化时，才会将父进程的内容复制一份给子进程。</p>
<ul>
<li>RDB保存文件</li>
</ul>
<p>在redis.conf中配置文件名称，默认为dump.rdb</p>
<p><img src="/2019/11/13/Redis数据库/12.png" alt="1573649165105"></p>
<ul>
<li>RDB文件的保存路径</li>
</ul>
<p>默认为Redis启动时命令行所在的目录下</p>
<p><img src="/2019/11/13/Redis数据库/13.png" alt="1573649183264"></p>
<ul>
<li>RDB的保存策略</li>
</ul>
<p><img src="/2019/11/13/Redis数据库/14.png" alt="1573649409453"></p>
<ul>
<li>手动保存快照</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bgsave</span><br><span class="line">save:只管保存，其它不管，全部阻塞</span><br></pre></td></tr></table></figure>

<p><img src="/2019/11/13/Redis数据库/15.png" alt="1573650527986"></p>
<p><img src="/2019/11/13/Redis数据库/16.png" alt="1573650559156"></p>
<p><img src="/2019/11/13/Redis数据库/17.png" alt="1573650581938"></p>
<h2 id="AOF方式"><a href="#AOF方式" class="headerlink" title="AOF方式"></a>AOF方式</h2><p>以<strong>日志的形式</strong>来记录每个写操作，将Redis执行过的所有写指令记录下来(读操作不记录)，只许追加文件但不可以改写文件，Redis启动之初会读取该文件重新构建数据，换言之，Redis重启的话就根据日志文件的内容将写指令从前到后执行一次以完成数据的恢复工作。</p>
<ul>
<li>AOF默认不开启，需要手动在配置文件中配置</li>
</ul>
<p><img src="/2019/11/13/Redis数据库/18.png" alt="1573652023787"></p>
<ul>
<li>可以在redis.conf中配置文件名称，默认为 appendonly.aof </li>
</ul>
<p><img src="/2019/11/13/Redis数据库/19.png" alt="1573652043910"></p>
<ul>
<li><p>AOF文件的保存路径，同RDB的路径一致</p>
</li>
<li><p>AOF和RDB同时开启，系统默认取AOF的数据</p>
</li>
<li><p>AOF文件故障备份</p>
</li>
</ul>
<p>AOF的备份机制和性能虽然和RDB不同,但是备份和恢复的操作同RDB一样，都是拷贝备份文件，需要恢复时再拷贝到Redis工作目录下，启动系统即加载。</p>
<ul>
<li>AOF文件故障恢复</li>
</ul>
<p>如遇到AOF文件损坏，可通过 redis-check-aof  –fix  appendonly.aof   进行恢复</p>
<ul>
<li>AOF同步频率设置<ul>
<li>始终同步，每次redis的写入都会立刻记入日志</li>
<li>每秒同步，每秒记入日志一次，如果宕机，本秒的数据可能丢失</li>
<li>把不主动进行同步，把同步时机交给操作系统</li>
</ul>
</li>
</ul>
<p><img src="/2019/11/13/Redis数据库/20.png" alt="1573694456934"></p>
<h3 id="Rewrite"><a href="#Rewrite" class="headerlink" title="Rewrite"></a>Rewrite</h3><p>AOF采用文件追加方式，文件会越来越大为避免出现此种情况，新增了重写机制,当AOF文件的大小超过所设定的阈值时，Redis就会启动AOF文件的内容压缩，只保留可以恢复数据的最小指令集.可以使用命令bgrewriteaof。</p>
<h3 id="如何实现重写？"><a href="#如何实现重写？" class="headerlink" title="如何实现重写？"></a>如何实现重写？</h3><p>AOF文件持续增长而过大时，会fork出一条新进程来将文件重写(也是先写临时文件最后再rename)，遍历新进程的内存中数据，每条记录有一条的Set语句。重写aof文件的操作，并没有读取旧的aof文件，而是将整个内存中的数据库内容用命令的方式重写了一个新的aof文件，这点和快照有点类似</p>
<h3 id="何时重写"><a href="#何时重写" class="headerlink" title="何时重写"></a>何时重写</h3><p>重写虽然可以节约大量磁盘空间，减少恢复时间。但是每次重写还是有一定的负担的，因此设定Redis要满足一定条件才会进行重写。</p>
<p><img src="/2019/11/13/Redis数据库/21.png" alt="1573694694079"></p>
<p>系统载入时或者上次重写完毕时，Redis会记录此时AOF大小，设为base_size,如果Redis的AOF当前大小&gt;=base_size+base_size*100%(默认)且当前大小&gt;=64mb(默认)的情况下，Redis会对AOF进行重写</p>
<p><img src="/2019/11/13/Redis数据库/22.png" alt="1573694751723"></p>
<h2 id="RDB-vs-AOF"><a href="#RDB-vs-AOF" class="headerlink" title="RDB vs AOF"></a>RDB vs AOF</h2><p><img src="/2019/11/13/Redis数据库/23.png" alt="1573694791219"></p>

    </div>

    
    
    
        
      
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>小鱼儿</li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://yoursite.com/2019/11/13/Redis数据库/" title="Redis数据库">http://yoursite.com/2019/11/13/Redis数据库/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-Hans" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li>
</ul>
</div>

      

      <footer class="post-footer">
          
            
          
          <div class="post-tags">
            
              <a href="/tags/Redis/" rel="tag"># Redis</a>
            
          </div>
        

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/2019/11/12/Hadoop之HDFS/" rel="next" title="Hadoop之HDFS">
                  <i class="fa fa-chevron-left"></i> Hadoop之HDFS
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
                <a href="/2019/11/17/数据结构与算法之深度和广度优先搜索/" rel="prev" title="如何找到社交网络中的三度好友关系">
                  如何找到社交网络中的三度好友关系 <i class="fa fa-chevron-right"></i>
                </a>
              
            </div>
          </div>
        
      </footer>
    
  </div>
  
  
  
  </article>

  </div>


          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">
        
        
        
        
      

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis简介"><span class="nav-number">1.</span> <span class="nav-text">Redis简介</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#技术"><span class="nav-number">1.1.</span> <span class="nav-text">技术</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#memcached-vs-Redis"><span class="nav-number">1.2.</span> <span class="nav-text">memcached vs Redis</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis启动"><span class="nav-number">2.</span> <span class="nav-text">Redis启动</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis数据类型"><span class="nav-number">3.</span> <span class="nav-text">Redis数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#key"><span class="nav-number">3.1.</span> <span class="nav-text">key</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#String类型"><span class="nav-number">3.2.</span> <span class="nav-text">String类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#特点"><span class="nav-number">3.2.1.</span> <span class="nav-text">特点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#语法"><span class="nav-number">3.2.2.</span> <span class="nav-text">语法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#List类型"><span class="nav-number">3.3.</span> <span class="nav-text">List类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#特点-1"><span class="nav-number">3.3.1.</span> <span class="nav-text">特点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#语法-1"><span class="nav-number">3.3.2.</span> <span class="nav-text">语法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Set类型"><span class="nav-number">3.4.</span> <span class="nav-text">Set类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#特点-2"><span class="nav-number">3.4.1.</span> <span class="nav-text">特点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#语法-2"><span class="nav-number">3.4.2.</span> <span class="nav-text">语法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Hash类型"><span class="nav-number">3.5.</span> <span class="nav-text">Hash类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#特点-3"><span class="nav-number">3.5.1.</span> <span class="nav-text">特点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#语法-3"><span class="nav-number">3.5.2.</span> <span class="nav-text">语法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Zset类型"><span class="nav-number">3.6.</span> <span class="nav-text">Zset类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#特点-4"><span class="nav-number">3.6.1.</span> <span class="nav-text">特点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#语法-4"><span class="nav-number">3.6.2.</span> <span class="nav-text">语法</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Java的Redis客户端Jedis"><span class="nav-number">4.</span> <span class="nav-text">Java的Redis客户端Jedis</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#测试连通性"><span class="nav-number">4.1.</span> <span class="nav-text">测试连通性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Jedis-API"><span class="nav-number">4.2.</span> <span class="nav-text">Jedis-API</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Key"><span class="nav-number">4.2.1.</span> <span class="nav-text">Key</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#String"><span class="nav-number">4.2.2.</span> <span class="nav-text">String</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#List"><span class="nav-number">4.2.3.</span> <span class="nav-text">List</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Set"><span class="nav-number">4.2.4.</span> <span class="nav-text">Set</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Hash"><span class="nav-number">4.2.5.</span> <span class="nav-text">Hash</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Zset"><span class="nav-number">4.2.6.</span> <span class="nav-text">Zset</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis事务"><span class="nav-number">5.</span> <span class="nav-text">Redis事务</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#定义"><span class="nav-number">5.1.</span> <span class="nav-text">定义</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#作用"><span class="nav-number">5.2.</span> <span class="nav-text">作用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Multi、Exec、discard"><span class="nav-number">5.3.</span> <span class="nav-text">Multi、Exec、discard</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#事务错误处理"><span class="nav-number">5.4.</span> <span class="nav-text">事务错误处理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#事务冲突"><span class="nav-number">5.5.</span> <span class="nav-text">事务冲突</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#冲突解决"><span class="nav-number">5.6.</span> <span class="nav-text">冲突解决</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#悲观锁"><span class="nav-number">5.6.1.</span> <span class="nav-text">悲观锁</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#乐观锁"><span class="nav-number">5.6.2.</span> <span class="nav-text">乐观锁</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#特性"><span class="nav-number">5.7.</span> <span class="nav-text">特性</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis-持久化"><span class="nav-number">6.</span> <span class="nav-text">Redis 持久化</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#RDB方式"><span class="nav-number">6.1.</span> <span class="nav-text">RDB方式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#AOF方式"><span class="nav-number">6.2.</span> <span class="nav-text">AOF方式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Rewrite"><span class="nav-number">6.2.1.</span> <span class="nav-text">Rewrite</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#如何实现重写？"><span class="nav-number">6.2.2.</span> <span class="nav-text">如何实现重写？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#何时重写"><span class="nav-number">6.2.3.</span> <span class="nav-text">何时重写</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RDB-vs-AOF"><span class="nav-number">6.3.</span> <span class="nav-text">RDB vs AOF</span></a></li></ol></li></ol></div>
        
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
      src="/images/fish.png"
      alt="小鱼儿">
  <p class="site-author-name" itemprop="name">小鱼儿</p>
  <div class="site-description" itemprop="description">肩膀有点痒，可能在长小翅膀</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">49</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">分类</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        <span class="site-state-item-count">41</span>
        <span class="site-state-item-name">标签</span>
        </a>
      </div>
    
  </nav>
</div>
  <div class="cc-license motion-element" itemprop="license">
    
  
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-Hans" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">小鱼儿</span>
</div>

        












        
      </div>
    </footer>
  </div>

  
  <script size="300" alpha="0.6" zIndex="-1" src="/lib/canvas-ribbon/canvas-ribbon.js"></script>
  <script src="/lib/anime.min.js?v=3.1.0"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/js/utils.js?v=7.4.1"></script><script src="/js/motion.js?v=7.4.1"></script>
<script src="/js/schemes/pisces.js?v=7.4.1"></script>

<script src="/js/next-boot.js?v=7.4.1"></script>



  





















  

  

  

</body>
</html>
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/clicklove.js"></script>

