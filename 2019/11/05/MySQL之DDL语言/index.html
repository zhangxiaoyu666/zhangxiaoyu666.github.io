<!DOCTYPE html>





<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.4.1">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.4.1">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.4.1">
  <link rel="mask-icon" href="/images/logo.svg?v=7.4.1" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.4.1">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.4.1',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="DDL语言DDL：数据定义语言">
<meta name="keywords" content="库、约束Data Define Langusge">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL之DDL语言">
<meta property="og:url" content="http://yoursite.com/2019/11/05/MySQL之DDL语言/index.html">
<meta property="og:site_name" content="一只鱼的博客">
<meta property="og:description" content="DDL语言DDL：数据定义语言">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://yoursite.com/2019/11/05/MySQL之DDL语言/1.png">
<meta property="og:image" content="http://yoursite.com/2019/11/05/MySQL之DDL语言/2.png">
<meta property="og:image" content="http://yoursite.com/2019/11/05/MySQL之DDL语言/3.png">
<meta property="og:image" content="http://yoursite.com/2019/11/05/MySQL之DDL语言/4.png">
<meta property="og:image" content="http://yoursite.com/2019/11/05/MySQL之DDL语言/5.png">
<meta property="og:image" content="http://yoursite.com/2019/11/05/MySQL之DDL语言/6.png">
<meta property="og:image" content="http://yoursite.com/2019/11/05/MySQL之DDL语言/7.png">
<meta property="og:image" content="http://yoursite.com/2019/11/05/MySQL之DDL语言/8.png">
<meta property="og:image" content="http://yoursite.com/2019/11/05/MySQL之DDL语言/9.png">
<meta property="og:image" content="http://yoursite.com/2019/11/05/MySQL之DDL语言/11.png">
<meta property="og:image" content="http://yoursite.com/2019/11/05/MySQL之DDL语言/12.png">
<meta property="og:image" content="http://yoursite.com/2019/11/05/MySQL之DDL语言/13.png">
<meta property="og:image" content="http://yoursite.com/2019/11/05/MySQL之DDL语言/14.png">
<meta property="og:image" content="http://yoursite.com/2019/11/05/MySQL之DDL语言/15.png">
<meta property="og:image" content="http://yoursite.com/2019/11/05/MySQL之DDL语言/16.png">
<meta property="og:image" content="http://yoursite.com/2019/11/05/MySQL之DDL语言/17.png">
<meta property="og:image" content="http://yoursite.com/2019/11/05/MySQL之DDL语言/22.png">
<meta property="og:image" content="http://yoursite.com/2019/11/05/MySQL之DDL语言/18.png">
<meta property="og:image" content="http://yoursite.com/2019/11/05/MySQL之DDL语言/19.png">
<meta property="og:image" content="http://yoursite.com/2019/11/05/MySQL之DDL语言/21.png">
<meta property="og:image" content="http://yoursite.com/2019/11/05/MySQL之DDL语言/20.png">
<meta property="og:image" content="http://yoursite.com/2019/11/05/MySQL之DDL语言/24.png">
<meta property="og:updated_time" content="2019-11-11T01:50:33.327Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="MySQL之DDL语言">
<meta name="twitter:description" content="DDL语言DDL：数据定义语言">
<meta name="twitter:image" content="http://yoursite.com/2019/11/05/MySQL之DDL语言/1.png">
  <link rel="canonical" href="http://yoursite.com/2019/11/05/MySQL之DDL语言/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>MySQL之DDL语言 | 一只鱼的博客</title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">
  <div class="container use-motion">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">一只鱼的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">七秒钟的记忆多一秒</p>
      
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    
      
      
        
      
        
      
        
      
    

    <a href="/" rel="section"><i class="fa fa-fw fa-question-circle"></i>首页</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-about">
      
    
      
      
        
      
        
      
        
      
    

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-tags">
      
    
      
      
        
      
        
      
        
          
        
      
    

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-question-circle"></i>标签<span class="badge">44</span></a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-categories">
      
    
      
      
        
      
        
          
        
      
        
      
    

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-question-circle"></i>分类<span class="badge">10</span></a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    
      
      
        
          
        
      
        
      
        
      
    

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-question-circle"></i>归档<span class="badge">67</span></a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-schedule">
      
    
      
      
        
      
        
      
        
      
    

    <a href="/schedule/" rel="section"><i class="fa fa-fw fa-calendar"></i>日程表</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-sitemap">
      
    
      
      
        
      
        
      
        
      
    

    <a href="/sitemap.xml" rel="section"><i class="fa fa-fw fa-sitemap"></i>站点地图</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-commonweal">
      
    
      
      
        
      
        
      
        
      
    

    <a href="/404/" rel="section"><i class="fa fa-fw fa-heartbeat"></i>公益 404</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
      <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block post">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/05/MySQL之DDL语言/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="小鱼儿">
      <meta itemprop="description" content="肩膀有点痒，可能在长小翅膀">
      <meta itemprop="image" content="/images/fish.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一只鱼的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">MySQL之DDL语言

          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-11-05 15:30:22" itemprop="dateCreated datePublished" datetime="2019-11-05T15:30:22+08:00">2019-11-05</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-11-11 09:50:33" itemprop="dateModified" datetime="2019-11-11T09:50:33+08:00">2019-11-11</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/MySQL/" itemprop="url" rel="index"><span itemprop="name">MySQL</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="DDL语言"><a href="#DDL语言" class="headerlink" title="DDL语言"></a>DDL语言</h1><p>DDL：数据定义语言<a id="more"></a>主要负责库和表的管理。</p>
<p>库的管理：创建、修改、删除</p>
<p>表的管理：创建、修改、删除</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">创建：create</span><br><span class="line">修改：alter</span><br><span class="line">删除：drop</span><br></pre></td></tr></table></figure>

<h1 id="库的管理"><a href="#库的管理" class="headerlink" title="库的管理"></a>库的管理</h1><h2 id="库的创建"><a href="#库的创建" class="headerlink" title="库的创建"></a>库的创建</h2><p>语法</p>
<p>create database [if not exists]库名;</p>
<h2 id="库的修改"><a href="#库的修改" class="headerlink" title="库的修改"></a>库的修改</h2><p>语法</p>
<p>rename database 库名 to 新库名 （现在不使用了，会导致数据丢失）</p>
<p>更改库名的字符集</p>
<p>alter database 库名 character set gbk;</p>
<h2 id="库的删除"><a href="#库的删除" class="headerlink" title="库的删除"></a>库的删除</h2><p>语法</p>
<p>drop database [if exists] 库名</p>
<h1 id="表的管理"><a href="#表的管理" class="headerlink" title="表的管理"></a>表的管理</h1><h2 id="表的创建"><a href="#表的创建" class="headerlink" title="表的创建"></a>表的创建</h2><p>语法</p>
<p>create table if not exists 表名{</p>
<p>​    列名 列的类型[(长度) 约束],</p>
<p>​    列名 列的类型[(长度) 约束],</p>
<p>​    列名 列的类型[(长度) 约束],</p>
<p>​    ……</p>
<p>​    列名 列的类型[(长度) 约束]</p>
<p>};</p>
<p>create table book{</p>
<p>​    id int,</p>
<p>​    bname varchar(20),</p>
<p>​    price double,</p>
<p>​    authorId int,</p>
<p>​    publishdate datetime</p>
<p>};</p>
<h2 id="表的修改"><a href="#表的修改" class="headerlink" title="表的修改"></a>表的修改</h2><p>alter table 表名 add | drop | modify | change column 列名 [列类型 约束]；</p>
<p>修改列名</p>
<p>alter table 表名 change column 旧列名 新列名 列的类型</p>
<p>修改列的类型或约束</p>
<p>alter table 表名 modify column 列名 列的类型</p>
<p>添加新列</p>
<p>alter table 表名 add column 列名 列的类型</p>
<p>删除列</p>
<p>alter table 表名 drop column 列名</p>
<p>修改表名</p>
<p>alter table 表名 rename to 新表名</p>
<h2 id="表的删除"><a href="#表的删除" class="headerlink" title="表的删除"></a>表的删除</h2><p>drop table if exists 表名；</p>
<p>通用的写法：<br>drop database if exists 旧库名；</p>
<p>create database 新库名；</p>
<p>drop table if exists 旧表名；</p>
<p>create table 新表名；</p>
<h2 id="表的复制"><a href="#表的复制" class="headerlink" title="表的复制"></a>表的复制</h2><p>insert into author values(1,’村上春树’,‘日本’),(2,’莫言’,’中国’)</p>
<h3 id="复制表结构"><a href="#复制表结构" class="headerlink" title="复制表结构"></a>复制表结构</h3><p>create table 表名1 like 表名2；</p>
<h3 id="复制表的结构-数据"><a href="#复制表的结构-数据" class="headerlink" title="复制表的结构+数据"></a>复制表的结构+数据</h3><p>create table 表名3</p>
<p>select * from 表名2；</p>
<h3 id="复制表的结构-部分数据"><a href="#复制表的结构-部分数据" class="headerlink" title="复制表的结构+部分数据"></a>复制表的结构+部分数据</h3><p>create table 表名4</p>
<p>select  列名1，列名2……</p>
<p>from 表名2</p>
<p>where 条件判断;</p>
<h3 id="复制表中某些字段结构"><a href="#复制表中某些字段结构" class="headerlink" title="复制表中某些字段结构"></a>复制表中某些字段结构</h3><p>create table 表名5</p>
<p>select 列名1，列名2……</p>
<p>from 表名2</p>
<p>where <strong>1=2</strong>；//where 0；</p>
<h1 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h1><p><img src="/2019/11/05/MySQL之DDL语言/1.png" alt="1572943363351"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">use test;</span><br><span class="line">create table dept1(</span><br><span class="line">	id int(7),</span><br><span class="line">    name varchar(25)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>将表 departments 中的数据插入新表 dept2 中 </li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">insert into dept2</span><br><span class="line">select department_id,department_name</span><br><span class="line">from myemployees.departments;</span><br></pre></td></tr></table></figure>

<p><img src="/2019/11/05/MySQL之DDL语言/2.png" alt="1572943415541"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create table emp5(</span><br><span class="line">	id int(7),</span><br><span class="line">	First_name varchar(25),</span><br><span class="line">	Last_name varchar(25),</span><br><span class="line">	Dept_id int(7));</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>将列 Last_name 的长度增加到 50 </li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table emp5 modify column Last_name varchar(50);</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>根据表 employees 创建 employees2 </li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create table employees2 like myemployees.employees;</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>删除表 emp5 </li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop table if exists emp5;</span><br></pre></td></tr></table></figure>

<ol start="7">
<li>将表 employees2 重命名为 emp5 </li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table employees2 rename to emp5;</span><br></pre></td></tr></table></figure>

<ol start="8">
<li>在表 dept 和 emp5 中添加新列 test_column，并检查所作的操作 </li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter table dept add column test_column int;</span><br><span class="line">alter table emp5 add column teat_column int;</span><br></pre></td></tr></table></figure>

<ol start="9">
<li>直接删除表 emp5 中的列 dept_id </li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table emp5 drop column test_column;</span><br></pre></td></tr></table></figure>

<h1 id="常见的数据类型"><a href="#常见的数据类型" class="headerlink" title="常见的数据类型"></a>常见的数据类型</h1><p>数值型 ：</p>
<p>​    整型</p>
<p>​    小数： </p>
<p>​        定点数</p>
<p>​        浮点数</p>
<p>字符型：</p>
<p>​    较短的文本： char、varchar</p>
<p>​    较长的文本：text、blob(较长的二进制数据)</p>
<p>日期型：</p>
<h2 id="数值型"><a href="#数值型" class="headerlink" title="数值型"></a>数值型</h2><h3 id="整型"><a href="#整型" class="headerlink" title="整型"></a>整型</h3><p><img src="/2019/11/05/MySQL之DDL语言/3.png" alt="1572944614627"></p>
<p>分类：</p>
<p>tinyint、smallint、mediumint、int/Integer</p>
<p>1        2        3        4</p>
<p>特点</p>
<ol>
<li>如果不设置无符号还是有符号，默认是有符号。如果想设置无符号，需要添加unsigned关键字</li>
<li>如果插入的数值超出了整型的范围，会报outofrange异常，并且插入临界值。</li>
<li>如果不设置长度，会有默认的长度 。长度代表了显示的最大宽度，如果不够会用0在左边填充，但是必须搭配zerofill使用。(使用zerofill默认数据类型是无符号)</li>
</ol>
<p>如何设置无符号和有符号</p>
<p><img src="/2019/11/05/MySQL之DDL语言/4.png" alt="1572944903985"></p>
<p>插入的数值超出了整型的范围</p>
<p><img src="/2019/11/05/MySQL之DDL语言/5.png" alt="1572945172254"></p>
<p>长度设置</p>
<p><img src="/2019/11/05/MySQL之DDL语言/6.png" alt="1572945610959"></p>
<p><img src="/2019/11/05/MySQL之DDL语言/7.png" alt="1572945659361"></p>
<h3 id="小数"><a href="#小数" class="headerlink" title="小数"></a>小数</h3><p><img src="/2019/11/05/MySQL之DDL语言/8.png" alt="1572952772525"></p>
<p>定点型</p>
<p>dec(M,D)</p>
<p>decimal(M,D)</p>
<p>浮点型</p>
<p>float(M,D)</p>
<p>double(M,D)</p>
<p>特点：</p>
<ol>
<li>M：整数部位+小数部位</li>
</ol>
<p>​       D：小数部位</p>
<p>​       如果超过范围，则插入临界值</p>
<ol start="2">
<li>M和D都可以省略，如果decimal，则M默认为10，D默认为0；如果是float和double，则会根据插入的数值的精度来决定精度。</li>
<li>定点型精确度较高，如果要求插入数值的精度较高如货币运算等则考虑使用使用。</li>
</ol>
<h3 id="字符型"><a href="#字符型" class="headerlink" title="字符型"></a>字符型</h3><p>​    较短的文本： char、varchar</p>
<p>​    其他：binary和varBinary用于保存较短的二进制</p>
<p>​           enum用于保存枚举</p>
<p>​           set用于保存集合</p>
<p>​    较长的文本：text、blob(较长的二进制数据)</p>
<p><img src="/2019/11/05/MySQL之DDL语言/9.png" alt="1572953523493"></p>
<p><strong>M是字符数</strong></p>
<p>特点</p>
<p><img src="/2019/11/05/MySQL之DDL语言/11.png" alt="1572953756558"></p>
<p>枚举类型</p>
<p><img src="/2019/11/05/MySQL之DDL语言/12.png" alt="1572953926776"></p>
<p>Set类型</p>
<p><img src="/2019/11/05/MySQL之DDL语言/13.png" alt="1572953965165"></p>
<p><img src="/2019/11/05/MySQL之DDL语言/14.png" alt="1572954010504"></p>
<h3 id="原则"><a href="#原则" class="headerlink" title="原则"></a>原则</h3><p>所选择的类型越简单越好，能保存数值的类型越小越好</p>
<h2 id="日期型"><a href="#日期型" class="headerlink" title="日期型"></a>日期型</h2><p><img src="/2019/11/05/MySQL之DDL语言/15.png" alt="1572954137837"></p>
<p><img src="/2019/11/05/MySQL之DDL语言/16.png" alt="1572954203671"></p>
<p>特点</p>
<p><img src="/2019/11/05/MySQL之DDL语言/17.png" alt="1572954393104"></p>
<h1 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h1><p>含义：一种限制，用于限制表中的数据，为了保证表中的数据的准确和可靠性</p>
<p>分类：六大约束</p>
<ol>
<li><p>NOT NULL  非空，用于保证该字段的值不能为空，比如姓名、学号等</p>
</li>
<li><p>DEFAULT：默认 用于保证该字段有默认值，比如性别</p>
</li>
<li><p>PRIMAR KEY:主键，用于保证该字段的值具有唯一性，并且非空，比如学号，员工编号等</p>
</li>
<li><p>UNIQUE:唯一，用于保证该字段的值具有唯一性，可以为空，比如座位号</p>
</li>
<li><p>CHECK:检查约束【mysql中不支持】，比如年龄，性别</p>
</li>
<li><p>FOREIGN KEY:外键，用于限制两个表的关系，用于保证该字段的值必须来自主表的关联列的值。在从表添加外键约束，用于引用主表中某列的值。比如学生表的专业编号，员工表的部门编号，员工表的工种编号。</p>
</li>
</ol>
<p>添加约束的时机：</p>
<ul>
<li><p>创建表时</p>
</li>
<li><p>修改表时</p>
</li>
</ul>
<p>约束的添加分类：</p>
<ul>
<li><p>列级约束</p>
<p>六大约束语法上都支持，但外键约束没有效果</p>
</li>
<li><p>表级约束</p>
<p>除了非空、默认，其他都支持</p>
</li>
</ul>
<p>create table 表名(</p>
<p>​    字段名  字段类型  列级约束，</p>
<p>​    字段名  字段类型，</p>
<p>​    表级约束</p>
<p>)；</p>
<h2 id="列级约束vs表级约束"><a href="#列级约束vs表级约束" class="headerlink" title="列级约束vs表级约束"></a>列级约束vs表级约束</h2><p><img src="/2019/11/05/MySQL之DDL语言/22.png" alt="1573003522904"></p>
<h2 id="创建表时添加约束"><a href="#创建表时添加约束" class="headerlink" title="创建表时添加约束"></a>创建表时添加约束</h2><h3 id="添加列级约束"><a href="#添加列级约束" class="headerlink" title="添加列级约束"></a>添加列级约束</h3><p>create database students;</p>
<p>use students;</p>
<p>create table stuinfo(</p>
<p>​    id int primary key,</p>
<p>​    stuName varchar(20) not null,</p>
<p>​    gender char(1) check(gender=’男’ or gender=’女’),</p>
<p>​    seat int unique,</p>
<p>​    age int default 18，</p>
<p>​    majorId int foreign key references  major(id)</p>
<p>);</p>
<p>create table major(</p>
<p>​    id int primary key,</p>
<p>​    majorName varchar(20)</p>
<p>);</p>
<p>show index from stuinfo;//查询索引，包括主键、外键、唯一</p>
<p><img src="/2019/11/05/MySQL之DDL语言/18.png" alt="1572959544477"></p>
<p>语法：</p>
<p>直接在字段名和类型后面追加约束类型即可。</p>
<p>只支持：默认、非空、主键、唯一</p>
<h3 id="添加表级约束"><a href="#添加表级约束" class="headerlink" title="添加表级约束"></a>添加表级约束</h3><p>drop table if exists stuinfo;</p>
<p>create table stuinfo(</p>
<p>​    id int,</p>
<p>​    stuname char(1),</p>
<p>​    seat int,</p>
<p>​    age int,</p>
<p>​    majorId int,</p>
<p>​    constraint pk primary key(id),</p>
<p>​    constraint uq unique(seat),</p>
<p>​    constraint ck check(gender = ‘男’ or gender = ‘女’),</p>
<p>​    constraint fk_stuinfo_major foreign key(majorId)</p>
<p>);</p>
<p>show index from stuinfo;</p>
<p><img src="/2019/11/05/MySQL之DDL语言/19.png" alt="1572961607812"></p>
<p>语法：</p>
<p>在各个字段最下面</p>
<p>[constraint  约束名] 约束类型(字段名)</p>
<p>通用写法：</p>
<p>create table if not exists stuinfo(</p>
<p>​    id int primary key,</p>
<p>​    stuName varchar(20) not null,</p>
<p>​    sex char(1),</p>
<p>​    seat int unique,</p>
<p>​    majorid int,</p>
<p>​    constraint fk_stuinfo_major foreign key(majorid)</p>
<p>);</p>
<h2 id="主键和唯一的对比"><a href="#主键和唯一的对比" class="headerlink" title="主键和唯一的对比"></a>主键和唯一的对比</h2><p><img src="/2019/11/05/MySQL之DDL语言/21.png" alt="1573001255087"></p>
<p><img src="/2019/11/05/MySQL之DDL语言/20.png" alt="1573001011406"></p>
<h2 id="外键特点"><a href="#外键特点" class="headerlink" title="外键特点"></a>外键特点</h2><ol>
<li>要求在从表设置外键关系</li>
<li>从表的外键列的类型和主表的关联列的类型要求一致或兼容，名称无要求</li>
<li>主表中的关联列必须是一个key(一般是主键或唯一键)</li>
<li>插入数据时，先插入主表，再插入从表；删除数据时，先删除从表，再删除主表。</li>
</ol>
<h2 id="修改表时添加约束"><a href="#修改表时添加约束" class="headerlink" title="修改表时添加约束"></a>修改表时添加约束</h2><p>添加非空约束</p>
<p>create table if not exists stuinfo(</p>
<p>​    id int ,</p>
<p>​    stuName varchar(20) ,</p>
<p>​    sex char(1),</p>
<p>​    seat int,</p>
<p>​    majorid int,</p>
<p>);</p>
<p>alter table stuinfo modify column stuname varchar(20) not null;</p>
<p>添加默认约束</p>
<p>alter table stuinfo modify  column age int default 18;</p>
<p>添加主键</p>
<ol>
<li><p>列级约束写法</p>
<p>alter table stuinfo modity column id int primary key;</p>
</li>
<li><p>表级约束写法</p>
<p>alter table stuinfo add primary key(id);</p>
</li>
</ol>
<p>添加唯一键</p>
<ol>
<li>列级约束</li>
</ol>
<p>alter table stuinfo modify column seat int unique;</p>
<ol start="2">
<li>表级约束</li>
</ol>
<p>alter table stuinfo add unique(seat);</p>
<p>添加外键</p>
<p>alter table stuinfo add constraint fk_stuinfo_major foreign key(majorid) references major(id);</p>
<p>语法：</p>
<ol>
<li>添加列级约束</li>
</ol>
<p>alter table 表名 modify column  字段名 字段类型 新约束；</p>
<ol start="2">
<li>添加表级约束</li>
</ol>
<p>alter table 表名 add [constraint 约束名] 约束类型(字段名)[外键的引用];</p>
<h2 id="修改表时删除约束"><a href="#修改表时删除约束" class="headerlink" title="修改表时删除约束"></a>修改表时删除约束</h2><p>删除非空约束</p>
<p>alter table stuinfo modify column stuname varchar(20) null;</p>
<p>删除默认约束</p>
<p>alter table stuinfo modify column age int;</p>
<p>删除主键</p>
<p>alter table stuinfo drop primary key;</p>
<p>删除唯一键</p>
<p>alter table stuinfo drop index seat;</p>
<p>删除外键</p>
<p>alter table stuinfo drop foreign key fk_stuinfo_major;</p>
<h1 id="MySQL中的数据完整性约束"><a href="#MySQL中的数据完整性约束" class="headerlink" title="MySQL中的数据完整性约束"></a>MySQL中的数据完整性约束</h1><ol>
<li>定义实体完整性，指关系的主属性不能取空值，即主键和候选键在关系中所对应的属性都不能取空值。MySQL中实体完整性就是通过主键约束和候选键约束来实现的。</li>
<li>定义参照完整性，主键和外键之间的引用规则，即外键的取值或者为空，或者等于被参照关系中某个主键的值。</li>
<li>用户定义的完整性，反映了某一具体应用所涉及的数据应满足的语义要求。</li>
</ol>
<h1 id="练习-1"><a href="#练习-1" class="headerlink" title="练习"></a>练习</h1><ol>
<li>向表 emp2 的 id 列中添加 PRIMARY KEY 约束（my_emp_id_pk） </li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter table modify column id int primary key;</span><br><span class="line">alter table emp2 add constraint my_emp_id_pk primary key(id);</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>向表 dept2 的 id 列中添加 PRIMARY KEY 约束（my_dept_id_pk） </li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table dept2 add constraint my_dept_id_pk primary key(id);</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>向表 emp2 中添加列 dept_id，并在其中定义 FOREIGN KEY 约束，与之相关联的列是 dept2 表中的 id 列。 </li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter table emp2 add column dept_id int; </span><br><span class="line">alter table emp2 add constraint fk_emp2_dept2 foreign key(dept_id) references dept2(id);</span><br></pre></td></tr></table></figure>

<h1 id="标识列"><a href="#标识列" class="headerlink" title="标识列"></a>标识列</h1><p>又称为自增长列，可以不用手动插入值，系统提供默认的序列值。</p>
<h2 id="创建表时设置标识列"><a href="#创建表时设置标识列" class="headerlink" title="创建表时设置标识列"></a>创建表时设置标识列</h2><p>create table if not exists tab_identity(</p>
<p>​    id int primary key auto_increment,</p>
<p>​    name varchar(20)</p>
<p>);</p>
<p>insert into tab_identity values(null,’join’);</p>
<p>insert into tab_identity(name) values(‘join’);</p>
<p>show variables like ‘%auto_increment%’</p>
<p><img src="/2019/11/05/MySQL之DDL语言/24.png" alt="1573004095461"></p>
<p>mysql不支持设置起始值，但是可以修改步长</p>
<p>set  auto_increment_increment = 3;</p>
<p>特点：</p>
<ol>
<li>标识列必须和主键搭配吗？不一定，但要求是一个key</li>
<li>一个表中有几个标识列？至多一个标识列</li>
<li>标识列的类型只能是数值型</li>
<li>标识列可以通过set  auto_increment_increment = 3;设置步长，也可以通过手动插入值，设置起始值</li>
</ol>
<h2 id="修改表时设置标识列"><a href="#修改表时设置标识列" class="headerlink" title="修改表时设置标识列"></a>修改表时设置标识列</h2><p>alter table tab_identity modify column id int primary key auto_increment;</p>
<h3 id="修改表时删除标识列"><a href="#修改表时删除标识列" class="headerlink" title="修改表时删除标识列"></a>修改表时删除标识列</h3><p>alter table tab_identity modify column id int;</p>

    </div>

    
    
    
        
      
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>小鱼儿</li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://yoursite.com/2019/11/05/MySQL之DDL语言/" title="MySQL之DDL语言">http://yoursite.com/2019/11/05/MySQL之DDL语言/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-Hans" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li>
</ul>
</div>

      

      <footer class="post-footer">
          
            
          
          <div class="post-tags">
            
              <a href="/tags/库、约束Data-Define-Langusge/" rel="tag"># 库、约束Data Define Langusge</a>
            
          </div>
        

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/2019/11/01/数据结构与算法之堆/" rel="next" title="为什么说堆排序没有快排快？">
                  <i class="fa fa-chevron-left"></i> 为什么说堆排序没有快排快？
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
                <a href="/2019/11/06/MySQL之TCL语言/" rel="prev" title="MySQL之TCL语言">
                  MySQL之TCL语言 <i class="fa fa-chevron-right"></i>
                </a>
              
            </div>
          </div>
        
      </footer>
    
  </div>
  
  
  
  </article>

  </div>


          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">
        
        
        
        
      

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#DDL语言"><span class="nav-number">1.</span> <span class="nav-text">DDL语言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#库的管理"><span class="nav-number">2.</span> <span class="nav-text">库的管理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#库的创建"><span class="nav-number">2.1.</span> <span class="nav-text">库的创建</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#库的修改"><span class="nav-number">2.2.</span> <span class="nav-text">库的修改</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#库的删除"><span class="nav-number">2.3.</span> <span class="nav-text">库的删除</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#表的管理"><span class="nav-number">3.</span> <span class="nav-text">表的管理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#表的创建"><span class="nav-number">3.1.</span> <span class="nav-text">表的创建</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#表的修改"><span class="nav-number">3.2.</span> <span class="nav-text">表的修改</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#表的删除"><span class="nav-number">3.3.</span> <span class="nav-text">表的删除</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#表的复制"><span class="nav-number">3.4.</span> <span class="nav-text">表的复制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#复制表结构"><span class="nav-number">3.4.1.</span> <span class="nav-text">复制表结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#复制表的结构-数据"><span class="nav-number">3.4.2.</span> <span class="nav-text">复制表的结构+数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#复制表的结构-部分数据"><span class="nav-number">3.4.3.</span> <span class="nav-text">复制表的结构+部分数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#复制表中某些字段结构"><span class="nav-number">3.4.4.</span> <span class="nav-text">复制表中某些字段结构</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#练习"><span class="nav-number">4.</span> <span class="nav-text">练习</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#常见的数据类型"><span class="nav-number">5.</span> <span class="nav-text">常见的数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#数值型"><span class="nav-number">5.1.</span> <span class="nav-text">数值型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#整型"><span class="nav-number">5.1.1.</span> <span class="nav-text">整型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#小数"><span class="nav-number">5.1.2.</span> <span class="nav-text">小数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字符型"><span class="nav-number">5.1.3.</span> <span class="nav-text">字符型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#原则"><span class="nav-number">5.1.4.</span> <span class="nav-text">原则</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#日期型"><span class="nav-number">5.2.</span> <span class="nav-text">日期型</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#约束"><span class="nav-number">6.</span> <span class="nav-text">约束</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#列级约束vs表级约束"><span class="nav-number">6.1.</span> <span class="nav-text">列级约束vs表级约束</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#创建表时添加约束"><span class="nav-number">6.2.</span> <span class="nav-text">创建表时添加约束</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#添加列级约束"><span class="nav-number">6.2.1.</span> <span class="nav-text">添加列级约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#添加表级约束"><span class="nav-number">6.2.2.</span> <span class="nav-text">添加表级约束</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#主键和唯一的对比"><span class="nav-number">6.3.</span> <span class="nav-text">主键和唯一的对比</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#外键特点"><span class="nav-number">6.4.</span> <span class="nav-text">外键特点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改表时添加约束"><span class="nav-number">6.5.</span> <span class="nav-text">修改表时添加约束</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改表时删除约束"><span class="nav-number">6.6.</span> <span class="nav-text">修改表时删除约束</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL中的数据完整性约束"><span class="nav-number">7.</span> <span class="nav-text">MySQL中的数据完整性约束</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#练习-1"><span class="nav-number">8.</span> <span class="nav-text">练习</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#标识列"><span class="nav-number">9.</span> <span class="nav-text">标识列</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#创建表时设置标识列"><span class="nav-number">9.1.</span> <span class="nav-text">创建表时设置标识列</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改表时设置标识列"><span class="nav-number">9.2.</span> <span class="nav-text">修改表时设置标识列</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#修改表时删除标识列"><span class="nav-number">9.2.1.</span> <span class="nav-text">修改表时删除标识列</span></a></li></ol></li></ol></li></ol></div>
        
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
      src="/images/fish.png"
      alt="小鱼儿">
  <p class="site-author-name" itemprop="name">小鱼儿</p>
  <div class="site-description" itemprop="description">肩膀有点痒，可能在长小翅膀</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">67</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">分类</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        <span class="site-state-item-count">44</span>
        <span class="site-state-item-name">标签</span>
        </a>
      </div>
    
  </nav>
</div>
  <div class="cc-license motion-element" itemprop="license">
    
  
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-Hans" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">小鱼儿</span>
</div>

        












        
      </div>
    </footer>
  </div>

  
  <script size="300" alpha="0.6" zIndex="-1" src="/lib/canvas-ribbon/canvas-ribbon.js"></script>
  <script src="/lib/anime.min.js?v=3.1.0"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/js/utils.js?v=7.4.1"></script><script src="/js/motion.js?v=7.4.1"></script>
<script src="/js/schemes/pisces.js?v=7.4.1"></script>

<script src="/js/next-boot.js?v=7.4.1"></script>



  





















  

  

  

</body>
</html>
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/clicklove.js"></script>

